--
-- PostgreSQL database dump
--

-- Dumped from database version 9.6.5
-- Dumped by pg_dump version 9.6.5

-- Started on 2017-12-28 19:21:08

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SET check_function_bodies = false;
SET client_min_messages = warning;
SET row_security = off;

--
-- TOC entry 1 (class 3079 OID 12387)
-- Name: plpgsql; Type: EXTENSION; Schema: -; Owner: 
--

CREATE EXTENSION IF NOT EXISTS plpgsql WITH SCHEMA pg_catalog;


--
-- TOC entry 2221 (class 0 OID 0)
-- Dependencies: 1
-- Name: EXTENSION plpgsql; Type: COMMENT; Schema: -; Owner: 
--

COMMENT ON EXTENSION plpgsql IS 'PL/pgSQL procedural language';


SET search_path = public, pg_catalog;

SET default_tablespace = '';

SET default_with_oids = false;

--
-- TOC entry 200 (class 1259 OID 33573)
-- Name: commentaire; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE commentaire (
    id bigint NOT NULL,
    id_utilisateur bigint,
    id_topo bigint,
    commentaire character varying,
    date timestamp without time zone
);


ALTER TABLE commentaire OWNER TO postgres;

--
-- TOC entry 199 (class 1259 OID 33571)
-- Name: commentaire_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE commentaire_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE commentaire_id_seq OWNER TO postgres;

--
-- TOC entry 2222 (class 0 OID 0)
-- Dependencies: 199
-- Name: commentaire_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE commentaire_id_seq OWNED BY commentaire.id;


--
-- TOC entry 194 (class 1259 OID 25231)
-- Name: longueur; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE longueur (
    id_longueur integer NOT NULL,
    nom character varying,
    cotation character varying,
    id_voie integer
);


ALTER TABLE longueur OWNER TO postgres;

--
-- TOC entry 193 (class 1259 OID 25229)
-- Name: longueur_id_longueur_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE longueur_id_longueur_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE longueur_id_longueur_seq OWNER TO postgres;

--
-- TOC entry 2223 (class 0 OID 0)
-- Dependencies: 193
-- Name: longueur_id_longueur_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE longueur_id_longueur_seq OWNED BY longueur.id_longueur;


--
-- TOC entry 195 (class 1259 OID 25360)
-- Name: reservation; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE reservation (
    id_topo bigint,
    id_utilisateur bigint,
    date_emprunt date,
    date_retour date,
    id_reservation integer NOT NULL
);


ALTER TABLE reservation OWNER TO postgres;

--
-- TOC entry 198 (class 1259 OID 25392)
-- Name: reservation_id_reservation_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE reservation_id_reservation_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE reservation_id_reservation_seq OWNER TO postgres;

--
-- TOC entry 2224 (class 0 OID 0)
-- Dependencies: 198
-- Name: reservation_id_reservation_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE reservation_id_reservation_seq OWNED BY reservation.id_reservation;


--
-- TOC entry 189 (class 1259 OID 25051)
-- Name: secteur; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE secteur (
    nom character varying NOT NULL,
    id_site bigint,
    id_secteur integer NOT NULL
);


ALTER TABLE secteur OWNER TO postgres;

--
-- TOC entry 190 (class 1259 OID 25064)
-- Name: secteur_id_secteur_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE secteur_id_secteur_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE secteur_id_secteur_seq OWNER TO postgres;

--
-- TOC entry 2225 (class 0 OID 0)
-- Dependencies: 190
-- Name: secteur_id_secteur_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE secteur_id_secteur_seq OWNED BY secteur.id_secteur;


--
-- TOC entry 185 (class 1259 OID 16786)
-- Name: site; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE site (
    nom character varying NOT NULL,
    pays character varying NOT NULL,
    region character varying NOT NULL,
    id_site bigint NOT NULL
);


ALTER TABLE site OWNER TO postgres;

--
-- TOC entry 186 (class 1259 OID 16812)
-- Name: site_id_site_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE site_id_site_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE site_id_site_seq OWNER TO postgres;

--
-- TOC entry 2226 (class 0 OID 0)
-- Dependencies: 186
-- Name: site_id_site_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE site_id_site_seq OWNED BY site.id_site;


--
-- TOC entry 188 (class 1259 OID 16841)
-- Name: topo; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE topo (
    id_topo integer NOT NULL,
    id_site bigint NOT NULL,
    nom_topo character varying NOT NULL,
    fichier character varying,
    "disponibilité" boolean,
    fichier_byte bytea
);


ALTER TABLE topo OWNER TO postgres;

--
-- TOC entry 187 (class 1259 OID 16839)
-- Name: topo_id_topo_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE topo_id_topo_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE topo_id_topo_seq OWNER TO postgres;

--
-- TOC entry 2227 (class 0 OID 0)
-- Dependencies: 187
-- Name: topo_id_topo_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE topo_id_topo_seq OWNED BY topo.id_topo;


--
-- TOC entry 197 (class 1259 OID 25378)
-- Name: utilisateur; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE utilisateur (
    id bigint NOT NULL,
    nom character varying NOT NULL,
    prenom character varying NOT NULL,
    mail character varying NOT NULL,
    mdp character varying NOT NULL
);


ALTER TABLE utilisateur OWNER TO postgres;

--
-- TOC entry 196 (class 1259 OID 25376)
-- Name: utilisateur_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE utilisateur_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE utilisateur_id_seq OWNER TO postgres;

--
-- TOC entry 2228 (class 0 OID 0)
-- Dependencies: 196
-- Name: utilisateur_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE utilisateur_id_seq OWNED BY utilisateur.id;


--
-- TOC entry 192 (class 1259 OID 25215)
-- Name: voie; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE voie (
    id_voie integer NOT NULL,
    nom character varying,
    cotation character varying,
    id_secteur integer
);


ALTER TABLE voie OWNER TO postgres;

--
-- TOC entry 191 (class 1259 OID 25213)
-- Name: voie_id_voie_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE voie_id_voie_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE voie_id_voie_seq OWNER TO postgres;

--
-- TOC entry 2229 (class 0 OID 0)
-- Dependencies: 191
-- Name: voie_id_voie_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE voie_id_voie_seq OWNED BY voie.id_voie;


--
-- TOC entry 2057 (class 2604 OID 33576)
-- Name: commentaire id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY commentaire ALTER COLUMN id SET DEFAULT nextval('commentaire_id_seq'::regclass);


--
-- TOC entry 2054 (class 2604 OID 25234)
-- Name: longueur id_longueur; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY longueur ALTER COLUMN id_longueur SET DEFAULT nextval('longueur_id_longueur_seq'::regclass);


--
-- TOC entry 2055 (class 2604 OID 25394)
-- Name: reservation id_reservation; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY reservation ALTER COLUMN id_reservation SET DEFAULT nextval('reservation_id_reservation_seq'::regclass);


--
-- TOC entry 2052 (class 2604 OID 25066)
-- Name: secteur id_secteur; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY secteur ALTER COLUMN id_secteur SET DEFAULT nextval('secteur_id_secteur_seq'::regclass);


--
-- TOC entry 2050 (class 2604 OID 16855)
-- Name: site id_site; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY site ALTER COLUMN id_site SET DEFAULT nextval('site_id_site_seq'::regclass);


--
-- TOC entry 2051 (class 2604 OID 16844)
-- Name: topo id_topo; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY topo ALTER COLUMN id_topo SET DEFAULT nextval('topo_id_topo_seq'::regclass);


--
-- TOC entry 2056 (class 2604 OID 25381)
-- Name: utilisateur id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY utilisateur ALTER COLUMN id SET DEFAULT nextval('utilisateur_id_seq'::regclass);


--
-- TOC entry 2053 (class 2604 OID 25218)
-- Name: voie id_voie; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY voie ALTER COLUMN id_voie SET DEFAULT nextval('voie_id_voie_seq'::regclass);


--
-- TOC entry 2214 (class 0 OID 33573)
-- Dependencies: 200
-- Data for Name: commentaire; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY commentaire (id, id_utilisateur, id_topo, commentaire, date) FROM stdin;
11	1	4	trou\r\n\r\n	2017-12-28 14:24:12.616
12	1	4	rrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrr	2017-12-28 16:42:31.734
13	1	3	tyru\r\nui	2017-12-28 16:47:38.058
\.


--
-- TOC entry 2230 (class 0 OID 0)
-- Dependencies: 199
-- Name: commentaire_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('commentaire_id_seq', 13, true);


--
-- TOC entry 2208 (class 0 OID 25231)
-- Dependencies: 194
-- Data for Name: longueur; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY longueur (id_longueur, nom, cotation, id_voie) FROM stdin;
1	SO LONG	5E	1
2	MARIANNE	6B	1
3	GET	4A	2
4	DOWN	9C	2
5	ON IT	3B	2
6	BIGGIE	8E	3
7	SMALLS	2B	3
8	MR PRESIDENT	7A	4
9	OLIVE	6M	5
10	HIGH LENGTH 1	6A	6
11	HIGH LENGTH 2	7A	6
12	SKY LENGTH 1	7B	7
13	SKY LENGTH 2 	8B	7
14	LAND SLIDE	9A	8
15	LANDING	9C	8
16	PILGROSSE	5B	9
17	PILI JIM	8E	9
18	HASTA	7A	10
19	LA VISTA	8A	10
20	BABY	9A	10
21	MICHELANGELO	1A	11
22	DONATELLO	2B	11
23	LEONARDO	3C	11
24	RAPHAELLO	4D	11
25	TTR	TTR	12
26	L1	L1	13
27	L2	L2	14
\.


--
-- TOC entry 2231 (class 0 OID 0)
-- Dependencies: 193
-- Name: longueur_id_longueur_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('longueur_id_longueur_seq', 27, true);


--
-- TOC entry 2209 (class 0 OID 25360)
-- Dependencies: 195
-- Data for Name: reservation; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY reservation (id_topo, id_utilisateur, date_emprunt, date_retour, id_reservation) FROM stdin;
4	1	2017-12-22	2017-12-27	21
4	1	2017-12-27	2018-01-26	48
3	1	2017-12-21	2017-12-27	17
\.


--
-- TOC entry 2232 (class 0 OID 0)
-- Dependencies: 198
-- Name: reservation_id_reservation_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('reservation_id_reservation_seq', 48, true);


--
-- TOC entry 2203 (class 0 OID 25051)
-- Dependencies: 189
-- Data for Name: secteur; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY secteur (nom, id_site, id_secteur) FROM stdin;
SECTEUR 1	1	1
SECTEUR 2	1	2
JACK	2	3
PALMER	2	4
SECTION 1	3	5
SECTION 2	3	6
SECTION 3	3	7
TOTOSECT1	4	8
SECT 1	5	9
SECT 2	5	10
\.


--
-- TOC entry 2233 (class 0 OID 0)
-- Dependencies: 190
-- Name: secteur_id_secteur_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('secteur_id_secteur_seq', 10, true);


--
-- TOC entry 2199 (class 0 OID 16786)
-- Dependencies: 185
-- Data for Name: site; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY site (nom, pays, region, id_site) FROM stdin;
ROCK	ESPAGNE	SIERRA LEONE	1
WHITE RABBIT	FINLAND	FIN LANDERS	2
HIGHLANDER	USA	UTAH	3
TOTO	TOTO	TOTO	4
LOCKE	USA	NEVADA	5
\.


--
-- TOC entry 2234 (class 0 OID 0)
-- Dependencies: 186
-- Name: site_id_site_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('site_id_site_seq', 5, true);


--
-- TOC entry 2202 (class 0 OID 16841)
-- Dependencies: 188
-- Data for Name: topo; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY topo (id_topo, id_site, nom_topo, fichier, "disponibilité", fichier_byte) FROM stdin;
1	1	Joe	ROUX.jpg	t	\N
2	2	FeelBetter	escalade.jpg	t	\N
4	2	Flink	Jellyfish.jpg	f	\N
3	1	Koalito	Koala.jpg	t	\N
\.


--
-- TOC entry 2235 (class 0 OID 0)
-- Dependencies: 187
-- Name: topo_id_topo_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('topo_id_topo_seq', 4, true);


--
-- TOC entry 2211 (class 0 OID 25378)
-- Dependencies: 197
-- Data for Name: utilisateur; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY utilisateur (id, nom, prenom, mail, mdp) FROM stdin;
1	Vij	Ed	lavij@hotmail.com	losc
2	Cocker	Joe	edvij@gmail.com	losc
3	joe	lok	lok@gmail.com	\\_CS
\.


--
-- TOC entry 2236 (class 0 OID 0)
-- Dependencies: 196
-- Name: utilisateur_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('utilisateur_id_seq', 3, true);


--
-- TOC entry 2206 (class 0 OID 25215)
-- Dependencies: 192
-- Data for Name: voie; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY voie (id_voie, nom, cotation, id_secteur) FROM stdin;
1	WAY UP	9A	1
2	WAY DOWN	7C	2
3	BIG JUMP	8B	2
4	CHAN	7C	3
5	RAIE	8B	4
6	HIGHER	7A	5
7	SKY	9A	5
8	LAND	8B	6
9	PILGRIMS	6B	6
10	ERMINATOR	4C	7
11	TURTLES	3D	7
12	TT	TT	8
13	V1	V1	9
14	V2	V2	10
\.


--
-- TOC entry 2237 (class 0 OID 0)
-- Dependencies: 191
-- Name: voie_id_voie_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('voie_id_voie_seq', 14, true);


--
-- TOC entry 2073 (class 2606 OID 33581)
-- Name: commentaire commentaire_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY commentaire
    ADD CONSTRAINT commentaire_pkey PRIMARY KEY (id);


--
-- TOC entry 2069 (class 2606 OID 25400)
-- Name: reservation id_reservation; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY reservation
    ADD CONSTRAINT id_reservation PRIMARY KEY (id_reservation);


--
-- TOC entry 2063 (class 2606 OID 25168)
-- Name: secteur id_secteur; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY secteur
    ADD CONSTRAINT id_secteur PRIMARY KEY (id_secteur);


--
-- TOC entry 2067 (class 2606 OID 25239)
-- Name: longueur longueur_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY longueur
    ADD CONSTRAINT longueur_pkey PRIMARY KEY (id_longueur);


--
-- TOC entry 2059 (class 2606 OID 16857)
-- Name: site site_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY site
    ADD CONSTRAINT site_pkey PRIMARY KEY (id_site);


--
-- TOC entry 2061 (class 2606 OID 16849)
-- Name: topo topo_pk; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY topo
    ADD CONSTRAINT topo_pk PRIMARY KEY (id_topo);


--
-- TOC entry 2071 (class 2606 OID 25386)
-- Name: utilisateur utilisateur_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY utilisateur
    ADD CONSTRAINT utilisateur_pkey PRIMARY KEY (id);


--
-- TOC entry 2065 (class 2606 OID 25223)
-- Name: voie voie_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY voie
    ADD CONSTRAINT voie_pkey PRIMARY KEY (id_voie);


--
-- TOC entry 2076 (class 2606 OID 25224)
-- Name: voie id_secteur; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY voie
    ADD CONSTRAINT id_secteur FOREIGN KEY (id_secteur) REFERENCES secteur(id_secteur) ON UPDATE CASCADE ON DELETE CASCADE;


--
-- TOC entry 2075 (class 2606 OID 25245)
-- Name: secteur id_site; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY secteur
    ADD CONSTRAINT id_site FOREIGN KEY (id_site) REFERENCES site(id_site) ON UPDATE CASCADE ON DELETE CASCADE;


--
-- TOC entry 2074 (class 2606 OID 25255)
-- Name: topo id_site; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY topo
    ADD CONSTRAINT id_site FOREIGN KEY (id_site) REFERENCES site(id_site) ON UPDATE CASCADE ON DELETE CASCADE;


--
-- TOC entry 2078 (class 2606 OID 25366)
-- Name: reservation id_topo; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY reservation
    ADD CONSTRAINT id_topo FOREIGN KEY (id_topo) REFERENCES topo(id_topo) ON UPDATE CASCADE ON DELETE CASCADE;


--
-- TOC entry 2081 (class 2606 OID 33587)
-- Name: commentaire id_topo; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY commentaire
    ADD CONSTRAINT id_topo FOREIGN KEY (id_topo) REFERENCES topo(id_topo) ON UPDATE CASCADE ON DELETE CASCADE;


--
-- TOC entry 2079 (class 2606 OID 25387)
-- Name: reservation id_utilisateur; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY reservation
    ADD CONSTRAINT id_utilisateur FOREIGN KEY (id_utilisateur) REFERENCES utilisateur(id) ON UPDATE CASCADE ON DELETE CASCADE;


--
-- TOC entry 2080 (class 2606 OID 33582)
-- Name: commentaire id_utilisateur; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY commentaire
    ADD CONSTRAINT id_utilisateur FOREIGN KEY (id_utilisateur) REFERENCES utilisateur(id) ON UPDATE CASCADE ON DELETE CASCADE;


--
-- TOC entry 2077 (class 2606 OID 25250)
-- Name: longueur id_voie; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY longueur
    ADD CONSTRAINT id_voie FOREIGN KEY (id_voie) REFERENCES voie(id_voie) ON UPDATE CASCADE ON DELETE CASCADE;


-- Completed on 2017-12-28 19:21:09

--
-- PostgreSQL database dump complete
--

